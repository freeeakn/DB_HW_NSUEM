# DB_HW_NSUEM

DataBase homework Arthur Pechenkin Fi202

Проектирование и работа с базой данных

## Необходимые ресурсы

<https://sqliteonline.com/> - тестовая система для работы с базами данных
<https://dbdesigner.net/> - система проектирования базы данных

## Задание 1

Спроектировать схему базы данных отражающую следующую информацию о студентах факультета:
    • ФИО студента
    • Дата рождения
    • Адрес проживания (Город, улица, номер дома)
    • Доступные телефоны для связи (неограниченное количество)
    • Адрес электронной почты
    • Группа
    • Направление обучения
    • Признак бюджетного/внебюджетного обучения
Структура базы данных должна соответствовать третьей нормальной форме и содержать внешние ключи в таблицах.

## Задание 2

Внести информацию о трех направлениях обучения, по каждому направлению внести не менее трех учебных групп, в каждую группу внести не менее 7 студентов (в разные группы разное количество).

## Задание 3

Привести базу данных к 3НФ в части адресов
На основании внесенных данных создать следующие запросы:
    • Вывести списки групп по заданному направлению с указание номера группы в формате ФИО, бюджет/внебюджет. Студентов выводить в алфавитном порядке.
    • Вывести студентов с фамилией, начинающейся с первой буквы вашей фамилии, с указанием ФИО, номера группы и направления обучения.
    • Вывести список студентов для поздравления по месяцам в формате Фамилия И.О., день и название месяца рождения, номером группы и направлением обучения.
    • Вывести студентов с указанием возраста в годах.
    • Вывести студентов, у которых день рождения в текущем месяце.
    • Вывести количество студентов по каждому направлению.
    • Вывести количество бюджетных и внебюджетных мест по группам. Для каждой группы вывести номер и название направления.

## Задание 4

Добавить в созданную ранее базу данных информацию о преподавателе, предметах и оценках студентов по этим предметам. Для каждого направления регистрируется свой набор учебных предметов и на каждый назначается преподаватель.
По каждому предмету студент может получить одну из оценок: 2,3,4,5 и может не иметь оценки
Структура базы данных должна соответствовать третьей нормальной форме и содержать внешние ключи в таблицах.
Необходимо внести информацию о 7 различных предметах, которые ведут 5 преподавателей. Каждый преподаватель может вести несколько дисциплин.
Для каждого направления необходимо внести информацию минимум о трех предметах. Внести оценки минимум 80% студентов по необходимым предметам.

## Задание 5

На основании внесенных данных создать следующие запросы:
    • Вывести списки групп по каждому предмету с указанием преподавателя.
    • Определить, какую дисциплину изучает максимальное количество студентов.
    • Определить сколько студентов обучается у каждого из преподавателей.
    • Определить долю сдавших студентов по каждой дисциплине (нет оценки или 2 считать не сдавшими).
    • Определить среднюю оценку по предметам (для сдавших студентов)
    • Определить  группу с максимальной средней оценкой (включая не сдавших)
    • Вывести студентов со всем оценками отлично и не имеющих несданный экзамен
    • Вывести кандидатов на отчисление (не сдан не менее двух предметов)

## Задание 6

Добавить в созданную ранее базу данных информацию
    • о времени проведения пар (1 пара с 8:00  до 9:30,  2 пара с 9:40 до 11:10 и т.д.),
    • посещенных студентом занятиях (с привязкой к дате, назначенному предмету и преподавателю.
Необходимо внести информацию о посещении для трех групп из разных направлений.

## Задание 7

На основании внесенных данных создать следующие запросы:
    • Вывести по заданному предмету количество посещенных занятий.
    • Вывести по заданному предмету количество пропущенных занятий.
    • Вывести по заданному преподавателю количество студентов на каждом занятии.
    • Для каждого студента вывести общее время, потраченное на изучение каждого предмета.

## Задание 8

Создание хранимых функций.
    • Создать функцию, вычисляющую среднюю оценку по заданному предмету для заданной группы.
    • Создать функцию, вычисляющую среднюю оценку по заданному предмету для заданного направления.
    • Создать функцию, вычисляющую количество отличников в заданной группе (если оценки отсутствуют, считать их неудовлетворительными).
    • Создать логическую функцию для проверки наличия несданных экзаменов у студента (есть оценка 2 или оценка отсутствует).
    • Создать функцию вычисляющую количество пропущенных занятий для каждого студента.
    • Создать функцию вычисляющую количество пропущенных занятий для каждой группы.
    • Создать функцию вычисляющую количество пропущенных занятий для каждого направления.
    • Создать функцию вычисляющую количество пропущенных занятий для каждого преподавателя.

Для каждой функции создать демонстрационные запросы.

## Задание 9

Создание триггеров.
    • Создать триггер для проверки корректности выставляемой оценки (допустимы оценки 2,3,4,5).
    • Создать триггер для проверки корректности выставляемой оценки преподавателем (те преподаватели, кто имеет назначение на предмет у группы).
    • Создать триггер, срабатывающий после внесения оценки, вычисляющий и сохраняющий отдельную таблицу среднее значение оценок группы по тому предмету, по которому выставлена оценка.
    • Создать триггер, срабатывающий после внесения оценки, вычисляющий и сохраняющий отдельную таблицу среднее значение оценок группы по всем оценкам группы.
    • Создать триггер, срабатывающий после внесения оценки, вычисляющий и сохраняющий отдельную таблицу среднее значение по тому предмету, по которому выставлена оценка.

Для каждой функции создать демонстрационные запросы.
